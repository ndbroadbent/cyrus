# Lefthook git hooks configuration
# https://github.com/evilmartians/lefthook

pre-commit:
  parallel: true
  commands:
    rust-fmt:
      glob: "*.rs"
      run: cargo fmt -- --check

    rust-clippy:
      glob: "*.rs"
      run: cargo clippy --all-targets --all-features -- -D warnings

    file-length:
      run: ./scripts/check_file_length.sh {staged_files}

    shellcheck:
      glob: "{*.sh,**/*.sh}"
      run: shellcheck {staged_files}

pre-push:
  commands:
    test:
      run: cargo test
    coverage:
      run: cargo llvm-cov --all-features --workspace --fail-under-lines 98
